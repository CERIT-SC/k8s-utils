#!/bin/sh

if [ $# -eq 0 ] ; then
    echo "Usage:"
    echo -e "\t./add_shell.sh \$IMAGE (\$UID)"
    exit 1
fi
if [ ! -e busybox ] ; then
    curl https://www.busybox.net/downloads/binaries/1.35.0-x86_64-linux-musl/busybox > busybox
fi
export USER_ID=0
if [ $# -gt 1 ] ; then
    export USER_ID=$2
fi
chmod +x busybox
IMAGE="$(echo $1 | sed 's/:.*//')"
mkdir busybox-cmds

DOCKERFILE="FROM $1
COPY busybox /bin/sh
COPY busybox /usr/bin/busybox
COPY --chown=$USER_ID:$USER_ID busybox-cmds /busybox-cmds
ENV PATH=\"/busybox-cmds:${PATH}\"
RUN /usr/bin/busybox ln -sf /usr/bin/busybox /busybox-cmds/ln
RUN ln -sf /usr/bin/busybox /busybox-cmds/acpid && ln -sf /usr/bin/busybox /busybox-cmds/add-shell && ln -sf /usr/bin/busybox /busybox-cmds/addgroup && ln -sf /usr/bin/busybox /busybox-cmds/adduser && ln -sf /usr/bin/busybox /busybox-cmds/adjtimex && ln -sf /usr/bin/busybox /busybox-cmds/ar && ln -sf /usr/bin/busybox /busybox-cmds/arch && ln -sf /usr/bin/busybox /busybox-cmds/arp && ln -sf /usr/bin/busybox /busybox-cmds/arping && ln -sf /usr/bin/busybox /busybox-cmds/ascii && ln -sf /usr/bin/busybox /busybox-cmds/ash && ln -sf /usr/bin/busybox /busybox-cmds/awk && ln -sf /usr/bin/busybox /busybox-cmds/base32 && ln -sf /usr/bin/busybox /busybox-cmds/base64 && ln -sf /usr/bin/busybox /busybox-cmds/basename && ln -sf /usr/bin/busybox /busybox-cmds/bc && ln -sf /usr/bin/busybox /busybox-cmds/blkdiscard && ln -sf /usr/bin/busybox /busybox-cmds/blkid && ln -sf /usr/bin/busybox /busybox-cmds/blockdev && ln -sf /usr/bin/busybox /busybox-cmds/bootchartd && ln -sf /usr/bin/busybox /busybox-cmds/brctl && ln -sf /usr/bin/busybox /busybox-cmds/bunzip2 && ln -sf /usr/bin/busybox /busybox-cmds/bzcat && ln -sf /usr/bin/busybox /busybox-cmds/bzip2 && ln -sf /usr/bin/busybox /busybox-cmds/cal && ln -sf /usr/bin/busybox /busybox-cmds/cat && ln -sf /usr/bin/busybox /busybox-cmds/chat && ln -sf /usr/bin/busybox /busybox-cmds/chattr && ln -sf /usr/bin/busybox /busybox-cmds/chgrp && ln -sf /usr/bin/busybox /busybox-cmds/chmod && ln -sf /usr/bin/busybox /busybox-cmds/chown && ln -sf /usr/bin/busybox /busybox-cmds/chpasswd && ln -sf /usr/bin/busybox /busybox-cmds/chpst && ln -sf /usr/bin/busybox /busybox-cmds/chroot && ln -sf /usr/bin/busybox /busybox-cmds/chrt && ln -sf /usr/bin/busybox /busybox-cmds/chvt && ln -sf /usr/bin/busybox /busybox-cmds/cksum && ln -sf /usr/bin/busybox /busybox-cmds/clear && ln -sf /usr/bin/busybox /busybox-cmds/cmp && ln -sf /usr/bin/busybox /busybox-cmds/comm && ln -sf /usr/bin/busybox /busybox-cmds/conspy && ln -sf /usr/bin/busybox /busybox-cmds/cp && ln -sf /usr/bin/busybox /busybox-cmds/cpio && ln -sf /usr/bin/busybox /busybox-cmds/crc32 && ln -sf /usr/bin/busybox /busybox-cmds/crond && ln -sf /usr/bin/busybox /busybox-cmds/crontab && ln -sf /usr/bin/busybox /busybox-cmds/cryptpw && ln -sf /usr/bin/busybox /busybox-cmds/cttyhack && ln -sf /usr/bin/busybox /busybox-cmds/cut && ln -sf /usr/bin/busybox /busybox-cmds/date && ln -sf /usr/bin/busybox /busybox-cmds/dc && ln -sf /usr/bin/busybox /busybox-cmds/dd && ln -sf /usr/bin/busybox /busybox-cmds/deallocvt && ln -sf /usr/bin/busybox /busybox-cmds/delgroup && ln -sf /usr/bin/busybox /busybox-cmds/deluser && ln -sf /usr/bin/busybox /busybox-cmds/depmod && ln -sf /usr/bin/busybox /busybox-cmds/devmem && ln -sf /usr/bin/busybox /busybox-cmds/df && ln -sf /usr/bin/busybox /busybox-cmds/dhcprelay && ln -sf /usr/bin/busybox /busybox-cmds/diff && ln -sf /usr/bin/busybox /busybox-cmds/dirname && ln -sf /usr/bin/busybox /busybox-cmds/dmesg && ln -sf /usr/bin/busybox /busybox-cmds/dnsd && ln -sf /usr/bin/busybox /busybox-cmds/dnsdomainname && ln -sf /usr/bin/busybox /busybox-cmds/dos2unix && ln -sf /usr/bin/busybox /busybox-cmds/dpkg && ln -sf /usr/bin/busybox /busybox-cmds/dpkg-deb && ln -sf /usr/bin/busybox /busybox-cmds/du && ln -sf /usr/bin/busybox /busybox-cmds/dumpkmap && ln -sf /usr/bin/busybox /busybox-cmds/dumpleases && ln -sf /usr/bin/busybox /busybox-cmds/echo && ln -sf /usr/bin/busybox /busybox-cmds/ed && ln -sf /usr/bin/busybox /busybox-cmds/egrep && ln -sf /usr/bin/busybox /busybox-cmds/eject && ln -sf /usr/bin/busybox /busybox-cmds/env && ln -sf /usr/bin/busybox /busybox-cmds/envdir && ln -sf /usr/bin/busybox /busybox-cmds/envuidgid && ln -sf /usr/bin/busybox /busybox-cmds/expand && ln -sf /usr/bin/busybox /busybox-cmds/expr && ln -sf /usr/bin/busybox /busybox-cmds/factor && ln -sf /usr/bin/busybox /busybox-cmds/fakeidentd && ln -sf /usr/bin/busybox /busybox-cmds/fallocate && ln -sf /usr/bin/busybox /busybox-cmds/false && ln -sf /usr/bin/busybox /busybox-cmds/fatattr && ln -sf /usr/bin/busybox /busybox-cmds/fbset && ln -sf /usr/bin/busybox /busybox-cmds/fbsplash && ln -sf /usr/bin/busybox /busybox-cmds/fdflush && ln -sf /usr/bin/busybox /busybox-cmds/fdformat && ln -sf /usr/bin/busybox /busybox-cmds/fdisk && ln -sf /usr/bin/busybox /busybox-cmds/fgconsole && ln -sf /usr/bin/busybox /busybox-cmds/fgrep && ln -sf /usr/bin/busybox /busybox-cmds/find && ln -sf /usr/bin/busybox /busybox-cmds/findfs && ln -sf /usr/bin/busybox /busybox-cmds/flash_eraseall && ln -sf /usr/bin/busybox /busybox-cmds/flash_lock && ln -sf /usr/bin/busybox /busybox-cmds/flash_unlock && ln -sf /usr/bin/busybox /busybox-cmds/flashcp && ln -sf /usr/bin/busybox /busybox-cmds/flock && ln -sf /usr/bin/busybox /busybox-cmds/fold && ln -sf /usr/bin/busybox /busybox-cmds/free && ln -sf /usr/bin/busybox /busybox-cmds/freeramdisk && ln -sf /usr/bin/busybox /busybox-cmds/fsck && ln -sf /usr/bin/busybox /busybox-cmds/fsck.minix && ln -sf /usr/bin/busybox /busybox-cmds/fsfreeze && ln -sf /usr/bin/busybox /busybox-cmds/fstrim && ln -sf /usr/bin/busybox /busybox-cmds/fsync && ln -sf /usr/bin/busybox /busybox-cmds/ftpd && ln -sf /usr/bin/busybox /busybox-cmds/ftpget && ln -sf /usr/bin/busybox /busybox-cmds/ftpput && ln -sf /usr/bin/busybox /busybox-cmds/fuser && ln -sf /usr/bin/busybox /busybox-cmds/getopt && ln -sf /usr/bin/busybox /busybox-cmds/getty && ln -sf /usr/bin/busybox /busybox-cmds/grep && ln -sf /usr/bin/busybox /busybox-cmds/groups && ln -sf /usr/bin/busybox /busybox-cmds/gunzip && ln -sf /usr/bin/busybox /busybox-cmds/gzip && ln -sf /usr/bin/busybox /busybox-cmds/halt && ln -sf /usr/bin/busybox /busybox-cmds/hd && ln -sf /usr/bin/busybox /busybox-cmds/hdparm && ln -sf /usr/bin/busybox /busybox-cmds/head && ln -sf /usr/bin/busybox /busybox-cmds/hexdump && ln -sf /usr/bin/busybox /busybox-cmds/hexedit && ln -sf /usr/bin/busybox /busybox-cmds/hostid && ln -sf /usr/bin/busybox /busybox-cmds/hostname && ln -sf /usr/bin/busybox /busybox-cmds/httpd && ln -sf /usr/bin/busybox /busybox-cmds/hush && ln -sf /usr/bin/busybox /busybox-cmds/hwclock && ln -sf /usr/bin/busybox /busybox-cmds/i2cdump && ln -sf /usr/bin/busybox /busybox-cmds/i2cget && ln -sf /usr/bin/busybox /busybox-cmds/i2cset && ln -sf /usr/bin/busybox /busybox-cmds/i2ctransfer && ln -sf /usr/bin/busybox /busybox-cmds/id && ln -sf /usr/bin/busybox /busybox-cmds/ifconfig && ln -sf /usr/bin/busybox /busybox-cmds/ifenslave && ln -sf /usr/bin/busybox /busybox-cmds/ifplugd && ln -sf /usr/bin/busybox /busybox-cmds/inetd && ln -sf /usr/bin/busybox /busybox-cmds/init && ln -sf /usr/bin/busybox /busybox-cmds/inotifyd && ln -sf /usr/bin/busybox /busybox-cmds/insmod && ln -sf /usr/bin/busybox /busybox-cmds/install && ln -sf /usr/bin/busybox /busybox-cmds/ionice && ln -sf /usr/bin/busybox /busybox-cmds/iostat && ln -sf /usr/bin/busybox /busybox-cmds/ip && ln -sf /usr/bin/busybox /busybox-cmds/ipaddr && ln -sf /usr/bin/busybox /busybox-cmds/ipcalc && ln -sf /usr/bin/busybox /busybox-cmds/ipcrm && ln -sf /usr/bin/busybox /busybox-cmds/ipcs && ln -sf /usr/bin/busybox /busybox-cmds/iplink && ln -sf /usr/bin/busybox /busybox-cmds/ipneigh && ln -sf /usr/bin/busybox /busybox-cmds/iproute && ln -sf /usr/bin/busybox /busybox-cmds/iprule && ln -sf /usr/bin/busybox /busybox-cmds/iptunnel && ln -sf /usr/bin/busybox /busybox-cmds/kbd_mode && ln -sf /usr/bin/busybox /busybox-cmds/kill && ln -sf /usr/bin/busybox /busybox-cmds/killall && ln -sf /usr/bin/busybox /busybox-cmds/killall5 && ln -sf /usr/bin/busybox /busybox-cmds/klogd && ln -sf /usr/bin/busybox /busybox-cmds/last && ln -sf /usr/bin/busybox /busybox-cmds/less && ln -sf /usr/bin/busybox /busybox-cmds/link && ln -sf /usr/bin/busybox /busybox-cmds/linux32 && ln -sf /usr/bin/busybox /busybox-cmds/linux64 && ln -sf /usr/bin/busybox /busybox-cmds/linuxrc && ln -sf /usr/bin/busybox /busybox-cmds/loadfont && ln -sf /usr/bin/busybox /busybox-cmds/loadkmap && ln -sf /usr/bin/busybox /busybox-cmds/logger && ln -sf /usr/bin/busybox /busybox-cmds/login && ln -sf /usr/bin/busybox /busybox-cmds/logname && ln -sf /usr/bin/busybox /busybox-cmds/losetup && ln -sf /usr/bin/busybox /busybox-cmds/lpd && ln -sf /usr/bin/busybox /busybox-cmds/lpq && ln -sf /usr/bin/busybox /busybox-cmds/lpr && ln -sf /usr/bin/busybox /busybox-cmds/ls && ln -sf /usr/bin/busybox /busybox-cmds/lsattr && ln -sf /usr/bin/busybox /busybox-cmds/lsmod && ln -sf /usr/bin/busybox /busybox-cmds/lsof && ln -sf /usr/bin/busybox /busybox-cmds/lspci && ln -sf /usr/bin/busybox /busybox-cmds/lsscsi && ln -sf /usr/bin/busybox /busybox-cmds/lsusb && ln -sf /usr/bin/busybox /busybox-cmds/lzcat && ln -sf /usr/bin/busybox /busybox-cmds/lzma && ln -sf /usr/bin/busybox /busybox-cmds/lzop && ln -sf /usr/bin/busybox /busybox-cmds/lzopcat && ln -sf /usr/bin/busybox /busybox-cmds/makedevs && ln -sf /usr/bin/busybox /busybox-cmds/makemime && ln -sf /usr/bin/busybox /busybox-cmds/man && ln -sf /usr/bin/busybox /busybox-cmds/md5sum && ln -sf /usr/bin/busybox /busybox-cmds/mdev && ln -sf /usr/bin/busybox /busybox-cmds/mesg && ln -sf /usr/bin/busybox /busybox-cmds/microcom && ln -sf /usr/bin/busybox /busybox-cmds/mim && ln -sf /usr/bin/busybox /busybox-cmds/mkdir && ln -sf /usr/bin/busybox /busybox-cmds/mkdosfs && ln -sf /usr/bin/busybox /busybox-cmds/mke2fs && ln -sf /usr/bin/busybox /busybox-cmds/mkfifo && ln -sf /usr/bin/busybox /busybox-cmds/mkfs.ext2 && ln -sf /usr/bin/busybox /busybox-cmds/mkfs.minix && ln -sf /usr/bin/busybox /busybox-cmds/mkfs.reiser && ln -sf /usr/bin/busybox /busybox-cmds/mkfs.vfat && ln -sf /usr/bin/busybox /busybox-cmds/mknod && ln -sf /usr/bin/busybox /busybox-cmds/mkpasswd && ln -sf /usr/bin/busybox /busybox-cmds/mkswap && ln -sf /usr/bin/busybox /busybox-cmds/mktemp && ln -sf /usr/bin/busybox /busybox-cmds/modinfo && ln -sf /usr/bin/busybox /busybox-cmds/modprobe && ln -sf /usr/bin/busybox /busybox-cmds/more && ln -sf /usr/bin/busybox /busybox-cmds/mount && ln -sf /usr/bin/busybox /busybox-cmds/mountpoint && ln -sf /usr/bin/busybox /busybox-cmds/mpstat && ln -sf /usr/bin/busybox /busybox-cmds/mt && ln -sf /usr/bin/busybox /busybox-cmds/mv && ln -sf /usr/bin/busybox /busybox-cmds/nameif && ln -sf /usr/bin/busybox /busybox-cmds/nbd-client && ln -sf /usr/bin/busybox /busybox-cmds/nc && ln -sf /usr/bin/busybox /busybox-cmds/netstat && ln -sf /usr/bin/busybox /busybox-cmds/nice && ln -sf /usr/bin/busybox /busybox-cmds/nl && ln -sf /usr/bin/busybox /busybox-cmds/nmeter && ln -sf /usr/bin/busybox /busybox-cmds/nohup && ln -sf /usr/bin/busybox /busybox-cmds/nologin && ln -sf /usr/bin/busybox /busybox-cmds/nproc && ln -sf /usr/bin/busybox /busybox-cmds/nsenter && ln -sf /usr/bin/busybox /busybox-cmds/nslookup && ln -sf /usr/bin/busybox /busybox-cmds/ntpd && ln -sf /usr/bin/busybox /busybox-cmds/nuke && ln -sf /usr/bin/busybox /busybox-cmds/od && ln -sf /usr/bin/busybox /busybox-cmds/openvt && ln -sf /usr/bin/busybox /busybox-cmds/partprobe && ln -sf /usr/bin/busybox /busybox-cmds/passwd && ln -sf /usr/bin/busybox /busybox-cmds/paste && ln -sf /usr/bin/busybox /busybox-cmds/patch && ln -sf /usr/bin/busybox /busybox-cmds/pgrep && ln -sf /usr/bin/busybox /busybox-cmds/pidof && ln -sf /usr/bin/busybox /busybox-cmds/ping && ln -sf /usr/bin/busybox /busybox-cmds/ping6 && ln -sf /usr/bin/busybox /busybox-cmds/pipe_progress && ln -sf /usr/bin/busybox /busybox-cmds/pivot_root && ln -sf /usr/bin/busybox /busybox-cmds/pkill && ln -sf /usr/bin/busybox /busybox-cmds/pmap && ln -sf /usr/bin/busybox /busybox-cmds/popmaildir && ln -sf /usr/bin/busybox /busybox-cmds/poweroff && ln -sf /usr/bin/busybox /busybox-cmds/powertop && ln -sf /usr/bin/busybox /busybox-cmds/printenv && ln -sf /usr/bin/busybox /busybox-cmds/printf && ln -sf /usr/bin/busybox /busybox-cmds/ps && ln -sf /usr/bin/busybox /busybox-cmds/pscan && ln -sf /usr/bin/busybox /busybox-cmds/pstree && ln -sf /usr/bin/busybox /busybox-cmds/pwd && ln -sf /usr/bin/busybox /busybox-cmds/pwdx && ln -sf /usr/bin/busybox /busybox-cmds/raidautorun && ln -sf /usr/bin/busybox /busybox-cmds/rdate && ln -sf /usr/bin/busybox /busybox-cmds/rdev && ln -sf /usr/bin/busybox /busybox-cmds/readlink && ln -sf /usr/bin/busybox /busybox-cmds/readprofile && ln -sf /usr/bin/busybox /busybox-cmds/realpath && ln -sf /usr/bin/busybox /busybox-cmds/reboot && ln -sf /usr/bin/busybox /busybox-cmds/reformime && ln -sf /usr/bin/busybox /busybox-cmds/remove-shell && ln -sf /usr/bin/busybox /busybox-cmds/renice && ln -sf /usr/bin/busybox /busybox-cmds/reset && ln -sf /usr/bin/busybox /busybox-cmds/resize && ln -sf /usr/bin/busybox /busybox-cmds/resume && ln -sf /usr/bin/busybox /busybox-cmds/rev && ln -sf /usr/bin/busybox /busybox-cmds/rm && ln -sf /usr/bin/busybox /busybox-cmds/rmdir && ln -sf /usr/bin/busybox /busybox-cmds/rmmod && ln -sf /usr/bin/busybox /busybox-cmds/route && ln -sf /usr/bin/busybox /busybox-cmds/rpm && ln -sf /usr/bin/busybox /busybox-cmds/rpm2cpio && ln -sf /usr/bin/busybox /busybox-cmds/rtcwake && ln -sf /usr/bin/busybox /busybox-cmds/run-init && ln -sf /usr/bin/busybox /busybox-cmds/run-parts && ln -sf /usr/bin/busybox /busybox-cmds/runlevel && ln -sf /usr/bin/busybox /busybox-cmds/runsv && ln -sf /usr/bin/busybox /busybox-cmds/runsvdir && ln -sf /usr/bin/busybox /busybox-cmds/rx && ln -sf /usr/bin/busybox /busybox-cmds/script && ln -sf /usr/bin/busybox /busybox-cmds/scriptreplay && ln -sf /usr/bin/busybox /busybox-cmds/sed && ln -sf /usr/bin/busybox /busybox-cmds/sendmail && ln -sf /usr/bin/busybox /busybox-cmds/seq && ln -sf /usr/bin/busybox /busybox-cmds/setarch && ln -sf /usr/bin/busybox /busybox-cmds/setconsole && ln -sf /usr/bin/busybox /busybox-cmds/setfattr && ln -sf /usr/bin/busybox /busybox-cmds/setfont && ln -sf /usr/bin/busybox /busybox-cmds/setkeycodes && ln -sf /usr/bin/busybox /busybox-cmds/setlogcons && ln -sf /usr/bin/busybox /busybox-cmds/setpriv && ln -sf /usr/bin/busybox /busybox-cmds/setserial && ln -sf /usr/bin/busybox /busybox-cmds/setsid && ln -sf /usr/bin/busybox /busybox-cmds/setuidgid && ln -sf /usr/bin/busybox /busybox-cmds/sha1sum && ln -sf /usr/bin/busybox /busybox-cmds/sha256sum && ln -sf /usr/bin/busybox /busybox-cmds/sha3sum && ln -sf /usr/bin/busybox /busybox-cmds/sha512sum && ln -sf /usr/bin/busybox /busybox-cmds/showkey && ln -sf /usr/bin/busybox /busybox-cmds/shred && ln -sf /usr/bin/busybox /busybox-cmds/shuf && ln -sf /usr/bin/busybox /busybox-cmds/slattach && ln -sf /usr/bin/busybox /busybox-cmds/sleep && ln -sf /usr/bin/busybox /busybox-cmds/smemcap && ln -sf /usr/bin/busybox /busybox-cmds/softlimit && ln -sf /usr/bin/busybox /busybox-cmds/sort && ln -sf /usr/bin/busybox /busybox-cmds/split && ln -sf /usr/bin/busybox /busybox-cmds/ssl_client && ln -sf /usr/bin/busybox /busybox-cmds/start-stop-daemon && ln -sf /usr/bin/busybox /busybox-cmds/stat && ln -sf /usr/bin/busybox /busybox-cmds/strings && ln -sf /usr/bin/busybox /busybox-cmds/stty && ln -sf /usr/bin/busybox /busybox-cmds/su && ln -sf /usr/bin/busybox /busybox-cmds/sulogin && ln -sf /usr/bin/busybox /busybox-cmds/sum && ln -sf /usr/bin/busybox /busybox-cmds/sv && ln -sf /usr/bin/busybox /busybox-cmds/svc && ln -sf /usr/bin/busybox /busybox-cmds/svlogd && ln -sf /usr/bin/busybox /busybox-cmds/svok && ln -sf /usr/bin/busybox /busybox-cmds/swapoff && ln -sf /usr/bin/busybox /busybox-cmds/swapon && ln -sf /usr/bin/busybox /busybox-cmds/switch_root && ln -sf /usr/bin/busybox /busybox-cmds/sync && ln -sf /usr/bin/busybox /busybox-cmds/sysctl && ln -sf /usr/bin/busybox /busybox-cmds/syslogd && ln -sf /usr/bin/busybox /busybox-cmds/tac && ln -sf /usr/bin/busybox /busybox-cmds/tail && ln -sf /usr/bin/busybox /busybox-cmds/tar && ln -sf /usr/bin/busybox /busybox-cmds/taskset && ln -sf /usr/bin/busybox /busybox-cmds/tc && ln -sf /usr/bin/busybox /busybox-cmds/tcpsvd && ln -sf /usr/bin/busybox /busybox-cmds/tee && ln -sf /usr/bin/busybox /busybox-cmds/telnet && ln -sf /usr/bin/busybox /busybox-cmds/telnetd && ln -sf /usr/bin/busybox /busybox-cmds/test && ln -sf /usr/bin/busybox /busybox-cmds/tftp && ln -sf /usr/bin/busybox /busybox-cmds/tftpd && ln -sf /usr/bin/busybox /busybox-cmds/time && ln -sf /usr/bin/busybox /busybox-cmds/timeout && ln -sf /usr/bin/busybox /busybox-cmds/top && ln -sf /usr/bin/busybox /busybox-cmds/touch && ln -sf /usr/bin/busybox /busybox-cmds/tr && ln -sf /usr/bin/busybox /busybox-cmds/traceroute && ln -sf /usr/bin/busybox /busybox-cmds/traceroute6 && ln -sf /usr/bin/busybox /busybox-cmds/true && ln -sf /usr/bin/busybox /busybox-cmds/truncate && ln -sf /usr/bin/busybox /busybox-cmds/ts && ln -sf /usr/bin/busybox /busybox-cmds/tty && ln -sf /usr/bin/busybox /busybox-cmds/ttysize && ln -sf /usr/bin/busybox /busybox-cmds/tunctl && ln -sf /usr/bin/busybox /busybox-cmds/tune2fs && ln -sf /usr/bin/busybox /busybox-cmds/ubiattach && ln -sf /usr/bin/busybox /busybox-cmds/ubidetach && ln -sf /usr/bin/busybox /busybox-cmds/ubimkvol && ln -sf /usr/bin/busybox /busybox-cmds/ubirename && ln -sf /usr/bin/busybox /busybox-cmds/ubirmvol && ln -sf /usr/bin/busybox /busybox-cmds/ubirsvol && ln -sf /usr/bin/busybox /busybox-cmds/ubiupdatevol && ln -sf /usr/bin/busybox /busybox-cmds/udhcpc && ln -sf /usr/bin/busybox /busybox-cmds/udhcpc6 && ln -sf /usr/bin/busybox /busybox-cmds/udhcpd && ln -sf /usr/bin/busybox /busybox-cmds/udpsvd && ln -sf /usr/bin/busybox /busybox-cmds/uevent && ln -sf /usr/bin/busybox /busybox-cmds/umount && ln -sf /usr/bin/busybox /busybox-cmds/uname && ln -sf /usr/bin/busybox /busybox-cmds/uncompress && ln -sf /usr/bin/busybox /busybox-cmds/unexpand && ln -sf /usr/bin/busybox /busybox-cmds/uniq && ln -sf /usr/bin/busybox /busybox-cmds/unix2dos && ln -sf /usr/bin/busybox /busybox-cmds/unlink && ln -sf /usr/bin/busybox /busybox-cmds/unlzma && ln -sf /usr/bin/busybox /busybox-cmds/unlzop && ln -sf /usr/bin/busybox /busybox-cmds/unshare && ln -sf /usr/bin/busybox /busybox-cmds/unxz && ln -sf /usr/bin/busybox /busybox-cmds/unzip && ln -sf /usr/bin/busybox /busybox-cmds/uptime && ln -sf /usr/bin/busybox /busybox-cmds/users && ln -sf /usr/bin/busybox /busybox-cmds/usleep && ln -sf /usr/bin/busybox /busybox-cmds/uudecode && ln -sf /usr/bin/busybox /busybox-cmds/uuencode && ln -sf /usr/bin/busybox /busybox-cmds/vconfig && ln -sf /usr/bin/busybox /busybox-cmds/vi && ln -sf /usr/bin/busybox /busybox-cmds/vlock && ln -sf /usr/bin/busybox /busybox-cmds/volname && ln -sf /usr/bin/busybox /busybox-cmds/w && ln -sf /usr/bin/busybox /busybox-cmds/wall && ln -sf /usr/bin/busybox /busybox-cmds/watch && ln -sf /usr/bin/busybox /busybox-cmds/watchdog && ln -sf /usr/bin/busybox /busybox-cmds/wc && ln -sf /usr/bin/busybox /busybox-cmds/wget && ln -sf /usr/bin/busybox /busybox-cmds/which && ln -sf /usr/bin/busybox /busybox-cmds/who && ln -sf /usr/bin/busybox /busybox-cmds/whoami && ln -sf /usr/bin/busybox /busybox-cmds/whois && ln -sf /usr/bin/busybox /busybox-cmds/xargs && ln -sf /usr/bin/busybox /busybox-cmds/xxd && ln -sf /usr/bin/busybox /busybox-cmds/xz && ln -sf /usr/bin/busybox /busybox-cmds/xzcat && ln -sf /usr/bin/busybox /busybox-cmds/yes && ln -sf /usr/bin/busybox /busybox-cmds/zcat && ln -sf /usr/bin/busybox /busybox-cmds/zcip"
echo "$DOCKERFILE" > Dockerfile
docker build . -t "$IMAGE:with-shell"
